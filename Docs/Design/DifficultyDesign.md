# Nodebreaker TD - 난이도 곡선 설계 (Stage 1~3)

| 항목 | 내용 |
|------|------|
| 문서 버전 | 1.0 |
| 최종 수정 | 2026-02-15 |
| 작성자 | 기획팀장 (Game Designer) |
| 기준 문서 | GDD v2.0, BalanceSheet v0.1 |

---

## 1. 설계 원칙

### 1.1 난이도 곡선 철학

```
난이도 = f(웨이브 내 Node 총 HP, 스폰 속도, Node 다양성)
클리어 가능성 = f(타워 DPS, 배치 수, 영구 업그레이드 수준)
```

핵심 설계 의도:
- **스테이지 내부**: 웨이브가 진행될수록 선형~완만한 지수 증가
- **스테이지 간**: 스케일링 배율로 급격한 점프 (HP x1.8 -> x3.0)
- **스테이지 점프를 영구 성장으로 메움**: 플레이어가 이전 스테이지 반복으로 성장하여 다음 스테이지의 벽을 넘음

### 1.2 DPS vs 총 HP 밸런스 프레임워크

각 웨이브의 "총 유효 HP"와 플레이어 예상 DPS를 대조하여 클리어 가능성을 시뮬레이션한다.

```
웨이브 총 HP = SUM(Node별 HP * 수량) * 스테이지 HP 배율
예상 총 DPS = 타워 수 * 기본 DPS * 영구 업그레이드 배율
웨이브 처리 시간 = 웨이브 총 HP / 예상 총 DPS
웨이브 지속 시간 = (총 Node 수 - 1) * 스폰 간격
```

**클리어 판정 기준**: 웨이브 처리 시간 < 웨이브 지속 시간 + (기지까지 이동 시간) 이면 안정 클리어 가능

---

## 2. Stage 1: Data Stream (5 웨이브)

### 2.1 스케일링 배율

| 항목 | 배율 |
|------|------|
| HP | x1.0 |
| 속도 | x1.0 |
| Bit 드롭 | x1.0 |
| 기지 HP | 20 |
| Core 보상 | 2 |

### 2.2 웨이브 구성

| 웨이브 | Node 구성 | 수량 | 스폰간격(s) | 대기(s) | 웨이브 총 HP | 총 Bit | 설계 의도 |
|--------|----------|------|-----------|---------|------------|--------|----------|
| 1 | Bit x5 | 5 | 1.2 | 2 | 100 | 15 | 기본 학습 |
| 2 | Bit x8 | 8 | 1.0 | 3 | 160 | 24 | 수량 증가, 타워 추가 유도 |
| 3 | Bit x6 + Quick x3 | 9 | 0.8 | 3 | 156 | 30 | 빠른 적 등장 |
| 4 | Bit x10 + Quick x5 | 15 | 0.7 | 3 | 260 | 50 | 물량 압박 |
| 5 | Bit x8 + Quick x4 + Heavy x2 | 14 | 0.6 | 3 | 368 | 56 | 최종 복합 웨이브 |

**총 Bit (전 웨이브 클리어)**: 175 + 웨이브 보너스 ~100 = ~275 Bit

### 2.3 난이도 곡선 분석

#### 웨이브별 총 HP 증가율

```
W1: 100 HP (기준)
W2: 160 HP (+60%, 단순 수량 증가)
W3: 156 HP (-2%, HP는 비슷하나 Quick의 빠른 속도가 실질 난이도 상승)
W4: 260 HP (+67%, 물량 급증)
W5: 368 HP (+42%, Heavy의 고HP가 시간 압박)
```

W1->W5 총 HP 증가: 3.68배. 웨이브 간 평균 증가율: 약 38%

#### 초기 상태 (영구 업그레이드 0) DPS 시뮬레이션

Arrow Lv1 DPS: 10.0 (1기 기준)

| 웨이브 | 총 HP | Arrow 1기 처리 시간 | 웨이브 지속 시간 | 판정 |
|--------|------|-------------------|----------------|------|
| W1 | 100 | 10.0s | 4.8s + 이동 | 1~2마리 놓침 -> 기지 -1~2 |
| W2 | 160 | 16.0s | 7.0s + 이동 | 3~4마리 놓침 -> 기지 -3~4 |
| W3 | 156 | 15.6s | 6.4s + 이동 | Quick 놓침 -> 기지 -3~5 |
| W4 | 260 | 26.0s | 9.8s + 이동 | 대량 돌파 -> 사망 |
| W5 | 368 | 36.8s | 7.8s + 이동 | 미도달 |

**결론**: 초기 상태에서 W2~W3 사이에 사망. 이것은 설계 의도(빠른 죽음)와 부합.

#### 첫 클리어 예상 시점

| 회차 | 누적 업그레이드 | 보정 DPS | Arrow 수 | 총 DPS | 도달 웨이브 |
|------|--------------|---------|---------|--------|-----------|
| 1~2 | 공격력 Lv1 | 11.0 | 1~2 | 11~22 | W2~3 |
| 3~5 | +공속 Lv1 | 12.1 | 2 | 24.2 | W3 |
| 6~10 | +공격력 Lv3 | 15.0 | 2~3 | 30~45 | W3~4 |
| 11~15 | +공격력 Lv5 | 19.8 | 3 | 59.4 | W4~5 |
| 16~20 | +기지HP, +공속 | 22.0+ | 3~4 | 66~88 | W5 클리어 |

**예상 클리어 시간**: 16~20회 런 (약 25~30분). GDD 타임라인(20~30분)과 부합.

---

## 3. Stage 2: Memory Block (7 웨이브)

### 3.1 스케일링 배율

| 항목 | 배율 |
|------|------|
| HP | x1.8 |
| 속도 | x1.0 |
| Bit 드롭 | x1.5 |
| 기지 HP | 20 |
| Core 보상 | 3 |

### 3.2 웨이브 구성

| 웨이브 | Node 구성 | 수량 | 스폰간격(s) | 대기(s) | 웨이브 총 HP (배율 적용) | 설계 의도 |
|--------|----------|------|-----------|---------|----------------------|----------|
| 1 | Bit x8 | 8 | 1.0 | 2 | 288 | 워밍업, St.1보다 약간 강함 |
| 2 | Bit x10 + Quick x3 | 13 | 0.9 | 3 | 425 | Quick 소수 혼합 |
| 3 | Quick x8 | 8 | 0.7 | 3 | 173 | 순수 Quick 러시 (속도 압박) |
| 4 | Bit x12 + Quick x6 | 18 | 0.7 | 3 | 519 | 대규모 혼합 물량전 |
| 5 | Bit x8 + Heavy x4 | 12 | 0.8 | 3 | 864 | Heavy 벽 첫 등장 |
| 6 | Bit x15 + Quick x8 | 23 | 0.5 | 3 | 713 | 물량 폭발 |
| 7 | Bit x10 + Quick x5 + Heavy x3 | 18 | 0.5 | 3 | 900 | 최종 복합 웨이브 |

### 3.3 웨이브별 총 HP 계산 상세

```
스테이지 2 기준 Node HP:
- Bit: 20 * 1.8 = 36
- Quick: 12 * 1.8 = 21.6
- Heavy: 80 * 1.8 = 144

W1: 36*8 = 288
W2: 36*10 + 21.6*3 = 360 + 64.8 = 424.8
W3: 21.6*8 = 172.8 (HP는 낮지만 속도 3.0이 문제)
W4: 36*12 + 21.6*6 = 432 + 129.6 = 561.6
W5: 36*8 + 144*4 = 288 + 576 = 864
W6: 36*15 + 21.6*8 = 540 + 172.8 = 712.8
W7: 36*10 + 21.6*5 + 144*3 = 360 + 108 + 432 = 900
```

### 3.4 난이도 곡선 분석

```
W1: 288 HP (기준)
W2: 425 HP (+48%)
W3: 173 HP (-59%, HP 낮지만 Quick 속도가 난이도)
W4: 562 HP (+225% vs W3, 실질적 첫 벽)
W5: 864 HP (+54%, Heavy의 고HP)
W6: 713 HP (-17%, HP는 줄지만 스폰 간격 0.5초 빠름)
W7: 900 HP (+26%, 최종)
```

**설계 의도**: W3(Quick 러시)에서 감속 타워의 필요성을 체감시키고, W5(Heavy 등장)에서 화력 집중의 중요성을 알려준다. W7은 3종 복합으로 종합 전략을 요구.

#### 클리어 예상 DPS 요구치

St.2 진입 시점 예상 영구 업그레이드: 공격력 Lv5(x1.5), 공속 Lv3(x1.15), Cannon 해금 가능

- Arrow Lv1 보정 DPS: 10.0 * 1.5 * 1.15 = 17.3
- Arrow 3기 + Cannon 1기 예상: 17.3*3 + 13.3*1.5*1.15 = 51.9 + 22.9 = 74.8 총 DPS
- W7 처리 시간: 900 / 74.8 = 12.0초 (웨이브 지속 ~8.5초) -> 타이트하지만 가능

**예상 클리어**: St.2 진입 후 10~15회 런 (약 20~30분 추가). 총 누적 50~60분.

---

## 4. Stage 3: Cache Layer (8 웨이브)

### 4.1 스케일링 배율

| 항목 | 배율 |
|------|------|
| HP | x3.0 |
| 속도 | x1.1 |
| Bit 드롭 | x2.2 |
| 기지 HP | 20 |
| Core 보상 | 4 |

### 4.2 Shield Node 첫 등장

Stage 3의 핵심 신규 요소는 **Shield Node**이다.

| 항목 | 값 |
|------|-----|
| 기본 HP | 40 |
| 스테이지 3 HP | 40 * 3.0 = 120 |
| 속도 | 1.2 * 1.1 = 1.32 |
| 방어력 | 5 (고정, 스케일링 미적용) |
| Bit 드롭 | 6 * 2.2 = 13.2 |

**방어력 영향**: Arrow Lv1 기본 데미지 8에서 방어력 5를 빼면 유효 데미지 3. DPS가 10.0에서 3.75로 급감.
영구 공격력 Lv5(x1.5) 적용 시: 데미지 12 - 5 = 7, DPS = 7/0.8 = 8.75. 여전히 일반 Node 대비 절반 이하.

**설계 의도**: Shield Node는 "고데미지 타워(Cannon)가 필수"라는 메시지를 전달. Arrow만으로는 비효율적이므로 AoE/고데미지 전략으로 전환을 유도.

### 4.3 웨이브 구성

| 웨이브 | Node 구성 | 수량 | 스폰간격(s) | 대기(s) | 웨이브 총 HP (배율 적용) | 설계 의도 |
|--------|----------|------|-----------|---------|----------------------|----------|
| 1 | Bit x10 | 10 | 0.9 | 2 | 600 | 워밍업 (x3.0 배율 체감) |
| 2 | Bit x8 + Quick x5 | 13 | 0.8 | 3 | 660 | 혼합 물량 |
| 3 | Shield x3 + Bit x5 | 8 | 1.0 | 3 | 660 | Shield 첫 등장! |
| 4 | Quick x10 + Shield x2 | 12 | 0.6 | 3 | 600 | Quick+Shield 조합 |
| 5 | Bit x15 + Shield x5 | 20 | 0.6 | 3 | 1500 | Shield 다수 + 물량 |
| 6 | Heavy x5 + Shield x3 | 8 | 1.0 | 3 | 1560 | 탱커 벽 |
| 7 | Bit x12 + Quick x8 + Shield x4 | 24 | 0.5 | 3 | 1488 | 대규모 복합 |
| 8 | Bit x10 + Quick x6 + Heavy x3 + Shield x4 | 23 | 0.5 | 3 | 2496 | 최종 4종 복합 |

### 4.4 웨이브별 총 HP 계산 상세

```
스테이지 3 기준 Node HP:
- Bit: 20 * 3.0 = 60
- Quick: 12 * 3.0 = 36
- Heavy: 80 * 3.0 = 240
- Shield: 40 * 3.0 = 120 (+ 방어력 5)

W1: 60*10 = 600
W2: 60*8 + 36*5 = 480 + 180 = 660
W3: 120*3 + 60*5 = 360 + 300 = 660 (Shield의 실질 HP는 방어력으로 더 높음)
W4: 36*10 + 120*2 = 360 + 240 = 600
W5: 60*15 + 120*5 = 900 + 600 = 1500
W6: 240*5 + 120*3 = 1200 + 360 = 1560
W7: 60*12 + 36*8 + 120*4 = 720 + 288 + 480 = 1488
W8: 60*10 + 36*6 + 240*3 + 120*4 = 600 + 216 + 720 + 480 = 2016
    (방어력 고려 실질: ~2496 유효 HP)
```

### 4.5 난이도 곡선 분석

```
W1: 600 HP (기준, St.1 W5의 1.63배)
W2: 660 HP (+10%)
W3: 660 HP (+0%, 그러나 Shield 방어력으로 실질 난이도 +30~50%)
W4: 600 HP (-9%, Quick 속도가 실질 난이도)
W5: 1500 HP (+150%, 첫 큰 벽)
W6: 1560 HP (+4%, Heavy+Shield 탱커 콤보)
W7: 1488 HP (-5%, 수량은 많지만 다양성이 난이도)
W8: 2016~2496 HP (+34~68%, 최종 4종 복합)
```

**설계 의도**: W3에서 Shield를 소수 도입하여 대응법을 학습시키고, W5~W6에서 본격적으로 Shield가 위협이 되며, W8에서 4종 Node를 동시 상대하는 종합 시험.

#### 클리어 예상 DPS 요구치

St.3 진입 시점 예상 영구 업그레이드: 공격력 Lv7(x1.7), 공속 Lv5(x1.25), Cannon Lv2~3, Ice 해금 가능

- Arrow Lv1 보정 DPS: 10.0 * 1.7 * 1.25 = 21.3
- Arrow 4기 + Cannon 2기 + Ice 1기 예상:
  - Arrow: 21.3 * 4 = 85.2
  - Cannon: 13.3 * 1.7 * 1.25 = 28.3 * 2 = 56.6 (AoE 3체 시 169.8)
  - Ice: 감속으로 유효 DPS +33% 간접 기여
  - 총 DPS (밀집 상황): ~300+
- W8 처리 시간: 2496 / 300 = 8.3초 (웨이브 지속 ~11초) -> 클리어 가능

**예상 클리어**: St.3 진입 후 10~15회 런 (약 20~30분 추가). 총 누적 약 1시간~1시간 30분.

---

## 5. 웨이브 간 난이도 증가율 요약

### 5.1 스테이지 내부 증가율

| 구간 | St.1 | St.2 | St.3 |
|------|------|------|------|
| W1->W2 | +60% | +48% | +10% |
| W2->W3 | -2% (Quick 도입) | -59% (Quick 러시) | +0% (Shield 도입) |
| W3->W4 | +67% | +225% | -9% (Quick 속도) |
| W4->W5 | +42% | +54% | +150% (첫 큰 벽) |
| W5->최종 | - | W5->W6: -17%, W6->W7: +26% | W5->W8: +66% |

### 5.2 스테이지 간 난이도 점프

| 비교 | 첫 웨이브 총 HP 비 | 최종 웨이브 총 HP 비 |
|------|------------------|-------------------|
| St.1 -> St.2 | 288/100 = 2.88배 | 900/368 = 2.45배 |
| St.2 -> St.3 | 600/288 = 2.08배 | 2496/900 = 2.77배 |

설계 의도: 스테이지 간 점프는 약 2~3배로, 영구 성장으로 메울 수 있는 범위 내.

---

## 6. 예상 클리어 타임라인

| 스테이지 | 진입 시점 | 클리어 시점 | 소요 시간 | 핵심 성장 |
|---------|---------|-----------|---------|----------|
| 1 | 0분 | ~30분 | 25~30분 | 공격력/공속/기지HP 기본 |
| 2 | ~30분 | ~55분 | 20~25분 | Cannon 해금, AoE 전략 |
| 3 | ~55분 | ~1시간 20분 | 20~30분 | Ice 해금, 감속+화력 시너지 |

총 3스테이지 클리어: 약 1시간 20분. GDD 기준 전체 10스테이지 3~5시간의 약 30% 시점.

---

## 7. 프로그래밍팀장 요청 사항

### 7.1 NodeData에 defense 필드 추가 필요

현재 `NodeData.cs`에 `defense`(방어력) 필드가 없다. Shield Node(방어력 5)와 Boss Node(방어력 3)를 위해 필요.

```csharp
// NodeData.cs에 추가 필요
[Header("방어력")]
public int defense = 0;  // 고정 방어력. 받는 데미지에서 차감 (최소 1 데미지 보장)
```

- Node_Shield: defense = 5
- Node_Boss: defense = 3
- 나머지 Node: defense = 0 (기본값)

### 7.2 Shield Node 프리팹 필요

현재 `Node_Shield.asset`의 `prefab` 참조가 비어 있다. Shield Node 프리팹 제작이 필요하다.

---

## 8. 밸런스 리스크

| 리스크 | 영향 | 모니터링 지표 | 대응 |
|--------|------|-------------|------|
| St.1 첫 런이 너무 짧아 좌절 | 이탈 | 첫 런 시간 < 20초 | W1 Node 수 5->4, 스폰 간격 1.2->1.5 |
| St.2 W3 Quick 러시가 Arrow만으로 대응 불가 | 벽에 막혀 이탈 | W3 도달 후 사망률 > 80% | Quick HP 12->15 or 속도 3.0->2.5 |
| St.3 Shield 방어력 5가 너무 높음 | Arrow가 완전 무력화 | Shield 처치율 < 30% | 방어력 5->3 or Arrow Lv3+ 시 관통 추가 |
| 영구 업그레이드 경로가 공격력 편중 | 빌드 다양성 없음 | 공격력 외 스킬 선택률 < 20% | 공속/사거리의 비용 효율 상향 |

---

*이 문서는 에디터 플레이테스트 결과에 따라 지속 업데이트됩니다.*
